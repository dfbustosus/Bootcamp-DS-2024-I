this.OMP=this.OMP||{},this.OMP.switchWidget=function(){"use strict";var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};var e=function(){return(e=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},r="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function n(t){var e={exports:{}};return t(e,e.exports),e.exports}var i,o=n((function(t,e){var n=r&&r.__spreadArrays||function(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;var n=Array(t),i=0;for(e=0;e<r;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)n[i]=o[s];return n};Object.defineProperty(e,"__esModule",{value:!0}),e.logger=void 0;var i=function(t){var e;if(t&&t.constructor)switch(t.constructor){case Error:e=t.stack;break;case Object:e=JSON.stringify(t,null,2);break;default:e=t}return e},o=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=t[1];if(t.length>2)for(var n=2;n<t.length;n++)r=r.replace("%s",i(t[n]));console[t[0]](r)};e.logger={log:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return o.apply(void 0,n(["log"],t))},info:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return o.apply(void 0,n(["info"],t))},error:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return o.apply(void 0,n(["error"],t))},warn:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return o.apply(void 0,n(["warn"],t))}}})),s=n((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.EventEmitter=void 0;var r=function(){function t(){this.events={},this.eventCount=0}return t.prototype.emit=function(t,e){if(void 0===e&&(e=""),t in this.events){var r=!1;this.events[t].forEach((function(t){t.fn.apply(null,[e]),t.emitOnce&&(r=!0)})),r&&(this.events[t]=this.events[t].filter((function(t){return!1===t.emitOnce})))}},t.prototype.on=function(t,e,r){void 0===r&&(r=!1),this.events.hasOwnProperty(t)||(this.events[t]=[]),this.events[t].some((function(t){return t.fn===e}))||this.events[t].push({id:this.eventCount++,emitOnce:r,fn:e})},t.prototype.off=function(t,e){this.events[t]=this.events[t].filter((function(t){return t.fn!==e}))},t.prototype.once=function(t,e){this.on(t,e,!0)},t}();e.EventEmitter=r})),a={logger:o.logger,EventEmitter:s.EventEmitter};!function(t){t.READY="READY",t.INIT_ERROR="INIT_ERROR",t.DATA="DATA",t.IFRAME_WIDGET_INITIALIZED="IFRAME_WIDGET_INITIALIZED",t.OPEN_WINDOW="OPEN_WINDOW",t.WINDOW_OPENED="WINDOW_OPENED"}(i||(i={}));var u,c,l=function(){function t(t,e){void 0===e&&(e=""),this.initialized=!1,this.ready=!1,this.iFrameResponseCheckInterval=null,this.iFrameResponseTimeout=10,this.iFrameMaxReloadCount=1,this.debug=!1,this.allowPopups=!1,this.reusePopupWindow=!1,this.popupReference=null,this.iFrameStyle={width:"0",height:"0",top:"0",left:"0",position:"relative",zIndex:"1000"},this.eventEmitter=t;var r=this.extractDomain(e);if(null===r)throw new Error("Invalid iFrameUrl domain");this.trustedDomain=r,this.iFrameUrl=e}return t.prototype.injectIFrame=function(){this.log("Injecting iFrame with URL: %s",this.iFrameUrl),this.iFrame=document.createElement("iframe"),this.iFrame.src=this.iFrameUrl,this.iFrame.setAttribute("id",this.makeUniqueId("omp-widget-iframe")),this.iFrame.setAttribute("referrerPolicy","strict-origin"),this.iFrame.style.display="none",this.iFrame.style.position=this.iFrameStyle.position,this.iFrame.style.width=this.iFrameStyle.width,this.iFrame.style.height=this.iFrameStyle.height,this.iFrame.style.top=this.iFrameStyle.top,this.iFrame.style.left=this.iFrameStyle.left,this.iFrame.style.zIndex=this.iFrameStyle.zIndex,this.iFrame.style.border="0",this.iFrame.setAttribute("sandbox","allow-scripts allow-same-origin"),document.body.appendChild(this.iFrame),this.checkIFrameInitialization()},t.prototype.checkIFrameInitialization=function(){var t=this;this.log("Waiting %s seconds for iFrame to load..",this.iFrameResponseTimeout),this.iFrameResponseCheckInterval=window.setTimeout((function(){t.iFrameMaxReloadCount>0?(t.log("Will retry loading the iFrame"),t.iFrame.src=t.iFrameUrl,t.iFrameMaxReloadCount--,t.checkIFrameInitialization()):(t.log("iFrame failed to load, check the URL: %s, is the user authenticated?",t.iFrameUrl),t.emit(i.INIT_ERROR,"iFrame took too long to respond"))}),1e3*this.iFrameResponseTimeout)},t.prototype.makeUniqueId=function(t){for(var e=t,r=1;document.getElementById(e);)e=t+"-"+r,r++;return e},t.prototype.openWindow=function(t){var e="omp-widget-top-window";this.reusePopupWindow||(this.popupReference=null,e=t),null===this.popupReference||this.popupReference&&this.popupReference.closed?this.popupReference=window.open(t,e):this.popupReference.location.href=t,this.popupReference&&this.popupReference.focus(),this.send(i.WINDOW_OPENED,t),this.emit(i.WINDOW_OPENED,t)},t.prototype.handleIFrameMessage=function(t){if(this.trustedDomain!==t.origin)return!1;switch(t.data.eventType||t.data.eventName){case i.IFRAME_WIDGET_INITIALIZED:window.clearInterval(this.iFrameResponseCheckInterval),this.ready=!0,this.log("iFrame loaded successfully, widget is initialized"),this.send(i.READY,this.serviceParameters),this.emit(i.READY);break;case i.OPEN_WINDOW:this.allowPopups&&this.openWindow(t.data.message);break;default:this.filterMessage(t.data.eventType,t.data.message)}},t.prototype.registerListeners=function(){window.addEventListener("message",this.handleIFrameMessage.bind(this),!1)},t.prototype.sendToIFrame=function(t,e){var r;void 0===e&&(e=""),null===(r=this.iFrame.contentWindow)||void 0===r||r.postMessage({eventType:t,message:e},this.iFrameUrl)},t.prototype.extractDomain=function(t){var e=null;try{var r=t.match(/^(https?:\/\/[^\/]+)/i);r&&(e=r[1])}catch(t){}return e},t.prototype.filterMessage=function(t,e){this.emit(t,e)},t.prototype.init=function(t,r){if(void 0===t&&(t={}),this.initialized)throw new Error("Widget has already been initialized");if(r){if(r.hasOwnProperty("debug")&&!0===r.debug&&(this.debug=!0,this.log("Supplied widget options: %s",r)),r.iFrameUrl){var n=this.extractDomain(r.iFrameUrl);if(null===n)throw this.log("Could not extract domain from supplied iFrameUrl: %s",r.iFrameUrl),new Error("Invalid iFrameUrl domain");this.iFrameUrl=r.iFrameUrl,this.trustedDomain=n,this.log("Setting iFrameUrl: %s",r.iFrameUrl),this.log("Setting trustedDomain from supplied iFrameUrl: %s",n)}r.iFrameStyle&&(this.iFrameStyle=e(e({},this.iFrameStyle),r.iFrameStyle),this.log("Setting iFrameStyle: %s",r.iFrameStyle)),"number"==typeof r.iFrameResponseTimeout&&(this.iFrameResponseTimeout=r.iFrameResponseTimeout,this.log("Setting iFrameResponseTimeout: %s",r.iFrameResponseTimeout)),r.trustedDomain&&(this.trustedDomain=r.trustedDomain,this.log("Setting trustedDomain: %s",r.trustedDomain)),r.hasOwnProperty("allowPopups")&&!0===r.allowPopups&&(this.allowPopups=r.allowPopups),r.hasOwnProperty("reusePopupWindow")&&!0===r.reusePopupWindow&&(this.reusePopupWindow=r.reusePopupWindow)}this.log("Supplied service parameters: %s",t),this.serviceParameters=t,this.registerListeners(),this.injectIFrame(),this.initialized=!0},t.prototype.send=function(t,e){this.sendToIFrame(t,e)},t.prototype.showIFrame=function(){this.iFrame.style.display="block"},t.prototype.hideIFrame=function(){this.iFrame.style.display="none"},t.prototype.emit=function(t,e){void 0===e&&(e=""),this.eventEmitter.emit(t,e),this.eventEmitter.emit(i.DATA,{status:t,message:e})},t.prototype.on=function(t,e){this.eventEmitter.on(t,e)},t.prototype.off=function(t,e){this.eventEmitter.off(t,e)},t.prototype.once=function(t,e){this.eventEmitter.once(t,e)},t.prototype.isWidgetOptions=function(t){return Object.keys(t).some((function(t){return["trustedDomain","iFrameUrl","debug"].includes(t)}))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.debug&&a.logger.info.apply(a.logger,t)},Object.defineProperty(t.prototype,"isInitialized",{get:function(){return this.initialized},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isReady",{get:function(){return this.ready},enumerable:!1,configurable:!0}),t}();!function(t){t.HIDE_LIGHTBOX="HIDE_LIGHTBOX",t.LIGHTBOX_HIDDEN="LIGHTBOX_HIDDEN",t.LIGHTBOX_SHOWN="LIGHTBOX_SHOWN",t.SWITCH_SUCCESS="SWITCH_SUCCESS",t.SWITCH_ERROR="SWITCH_ERROR"}(u||(u={})),function(t){t.SUCCESS="SUCCESS",t.ERROR="ERROR",t.CANCELLED="CANCELLED"}(c||(c={}));var f=function(e){function r(t,r){var n=e.call(this,t,r)||this;return n.iFrameStyle={width:"100%",height:"100vh",top:"0",left:"0",position:"fixed",zIndex:"1000"},n}return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}(r,e),r.prototype.filterMessage=function(t,e){switch(t){case u.HIDE_LIGHTBOX:this.hideLightbox(e);break;default:this.emit(t,e)}},r.prototype.showLightbox=function(t){this.isReady&&(this.showIFrame(),this.emit(u.LIGHTBOX_SHOWN),this.send(u.LIGHTBOX_SHOWN,t))},r.prototype.hideLightbox=function(t){this.isReady&&(this.hideIFrame(),this.emit(u.LIGHTBOX_HIDDEN,t),this.send(u.LIGHTBOX_HIDDEN))},r.prototype.init=function(t,r){switch(arguments.length){case 0:e.prototype.init.call(this);break;case 1:t&&(this.isWidgetOptions(t)?e.prototype.init.call(this,{},t):e.prototype.init.call(this,t));break;default:e.prototype.init.call(this,t,r)}},r}(l),p=function(t){return t&&t.Math==Math&&t},h=p("object"==typeof globalThis&&globalThis)||p("object"==typeof window&&window)||p("object"==typeof self&&self)||p("object"==typeof r&&r)||function(){return this}()||Function("return this")(),m=function(t){try{return!!t()}catch(t){return!0}},d=!m((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),y={}.propertyIsEnumerable,g=Object.getOwnPropertyDescriptor,v={f:g&&!y.call({1:2},1)?function(t){var e=g(this,t);return!!e&&e.enumerable}:y},w=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},F={}.toString,O=function(t){return F.call(t).slice(8,-1)},I="".split,b=m((function(){return!Object("z").propertyIsEnumerable(0)}))?function(t){return"String"==O(t)?I.call(t,""):Object(t)}:Object,E=function(t){if(null==t)throw TypeError("Can't call method on "+t);return t},S=function(t){return b(E(t))},R=function(t){return"object"==typeof t?null!==t:"function"==typeof t},T=function(t,e){if(!R(t))return t;var r,n;if(e&&"function"==typeof(r=t.toString)&&!R(n=r.call(t)))return n;if("function"==typeof(r=t.valueOf)&&!R(n=r.call(t)))return n;if(!e&&"function"==typeof(r=t.toString)&&!R(n=r.call(t)))return n;throw TypeError("Can't convert object to primitive value")},D={}.hasOwnProperty,P=function(t,e){return D.call(t,e)},_=h.document,W=R(_)&&R(_.createElement),N=!d&&!m((function(){return 7!=Object.defineProperty((t="div",W?_.createElement(t):{}),"a",{get:function(){return 7}}).a;var t})),j=Object.getOwnPropertyDescriptor,A={f:d?j:function(t,e){if(t=S(t),e=T(e,!0),N)try{return j(t,e)}catch(t){}if(P(t,e))return w(!v.f.call(t,e),t[e])}},C=function(t){if(!R(t))throw TypeError(String(t)+" is not an object");return t},L=Object.defineProperty,k={f:d?L:function(t,e,r){if(C(t),e=T(e,!0),C(r),N)try{return L(t,e,r)}catch(t){}if("get"in r||"set"in r)throw TypeError("Accessors not supported");return"value"in r&&(t[e]=r.value),t}},M=d?function(t,e,r){return k.f(t,e,w(1,r))}:function(t,e,r){return t[e]=r,t},H=function(t,e){try{M(h,t,e)}catch(r){h[t]=e}return e},U="__core-js_shared__",x=h[U]||H(U,{}),z=Function.toString;"function"!=typeof x.inspectSource&&(x.inspectSource=function(t){return z.call(t)});var G,B,X,Y,q=x.inspectSource,Z=h.WeakMap,J="function"==typeof Z&&/native code/.test(q(Z)),K=n((function(t){(t.exports=function(t,e){return x[t]||(x[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.8.2",mode:"global",copyright:"Â© 2021 Denis Pushkarev (zloirock.ru)"})})),V=0,Q=Math.random(),$=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++V+Q).toString(36)},tt=K("keys"),et={},rt=h.WeakMap;if(J){var nt=x.state||(x.state=new rt),it=nt.get,ot=nt.has,st=nt.set;G=function(t,e){return e.facade=t,st.call(nt,t,e),e},B=function(t){return it.call(nt,t)||{}},X=function(t){return ot.call(nt,t)}}else{var at=tt[Y="state"]||(tt[Y]=$(Y));et[at]=!0,G=function(t,e){return e.facade=t,M(t,at,e),e},B=function(t){return P(t,at)?t[at]:{}},X=function(t){return P(t,at)}}var ut,ct,lt,ft={set:G,get:B,has:X,enforce:function(t){return X(t)?B(t):G(t,{})},getterFor:function(t){return function(e){var r;if(!R(e)||(r=B(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return r}}},pt=n((function(t){var e=ft.get,r=ft.enforce,n=String(String).split("String");(t.exports=function(t,e,i,o){var s,a=!!o&&!!o.unsafe,u=!!o&&!!o.enumerable,c=!!o&&!!o.noTargetGet;"function"==typeof i&&("string"!=typeof e||P(i,"name")||M(i,"name",e),(s=r(i)).source||(s.source=n.join("string"==typeof e?e:""))),t!==h?(a?!c&&t[e]&&(u=!0):delete t[e],u?t[e]=i:M(t,e,i)):u?t[e]=i:H(e,i)})(Function.prototype,"toString",(function(){return"function"==typeof this&&e(this).source||q(this)}))})),ht=h,mt=function(t){return"function"==typeof t?t:void 0},dt=Math.ceil,yt=Math.floor,gt=function(t){return isNaN(t=+t)?0:(t>0?yt:dt)(t)},vt=Math.min,wt=function(t){return t>0?vt(gt(t),9007199254740991):0},Ft=Math.max,Ot=Math.min,It=function(t){return function(e,r,n){var i,o=S(e),s=wt(o.length),a=function(t,e){var r=gt(t);return r<0?Ft(r+e,0):Ot(r,e)}(n,s);if(t&&r!=r){for(;s>a;)if((i=o[a++])!=i)return!0}else for(;s>a;a++)if((t||a in o)&&o[a]===r)return t||a||0;return!t&&-1}},bt={includes:It(!0),indexOf:It(!1)}.indexOf,Et=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"].concat("length","prototype"),St={f:Object.getOwnPropertyNames||function(t){return function(t,e){var r,n=S(t),i=0,o=[];for(r in n)!P(et,r)&&P(n,r)&&o.push(r);for(;e.length>i;)P(n,r=e[i++])&&(~bt(o,r)||o.push(r));return o}(t,Et)}},Rt={f:Object.getOwnPropertySymbols},Tt=function(t,e){return arguments.length<2?mt(ht[t])||mt(h[t]):ht[t]&&ht[t][e]||h[t]&&h[t][e]}("Reflect","ownKeys")||function(t){var e=St.f(C(t)),r=Rt.f;return r?e.concat(r(t)):e},Dt=function(t,e){for(var r=Tt(e),n=k.f,i=A.f,o=0;o<r.length;o++){var s=r[o];P(t,s)||n(t,s,i(e,s))}},Pt=/#|\.prototype\./,_t=function(t,e){var r=Nt[Wt(t)];return r==At||r!=jt&&("function"==typeof e?m(e):!!e)},Wt=_t.normalize=function(t){return String(t).replace(Pt,".").toLowerCase()},Nt=_t.data={},jt=_t.NATIVE="N",At=_t.POLYFILL="P",Ct=_t,Lt=A.f,kt=function(t,e,r){if(function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function")}(t),void 0===e)return t;switch(r){case 0:return function(){return t.call(e)};case 1:return function(r){return t.call(e,r)};case 2:return function(r,n){return t.call(e,r,n)};case 3:return function(r,n,i){return t.call(e,r,n,i)}}return function(){return t.apply(e,arguments)}},Mt=Array.isArray||function(t){return"Array"==O(t)},Ht=!!Object.getOwnPropertySymbols&&!m((function(){return!String(Symbol())})),Ut=Ht&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,xt=K("wks"),zt=h.Symbol,Gt=Ut?zt:zt&&zt.withoutSetter||$,Bt=(P(xt,ut="species")||(Ht&&P(zt,ut)?xt[ut]=zt[ut]:xt[ut]=Gt("Symbol."+ut)),xt[ut]),Xt=function(t,e){var r;return Mt(t)&&("function"!=typeof(r=t.constructor)||r!==Array&&!Mt(r.prototype)?R(r)&&null===(r=r[Bt])&&(r=void 0):r=void 0),new(void 0===r?Array:r)(0===e?0:e)},Yt=[].push,qt=function(t){var e=1==t,r=2==t,n=3==t,i=4==t,o=6==t,s=7==t,a=5==t||o;return function(u,c,l,f){for(var p,h,m=Object(E(u)),d=b(m),y=kt(c,l,3),g=wt(d.length),v=0,w=f||Xt,F=e?w(u,g):r||s?w(u,0):void 0;g>v;v++)if((a||v in d)&&(h=y(p=d[v],v,m),t))if(e)F[v]=h;else if(h)switch(t){case 3:return!0;case 5:return p;case 6:return v;case 2:Yt.call(F,p)}else switch(t){case 4:return!1;case 7:Yt.call(F,p)}return o?-1:n||i?i:F}},Zt={forEach:qt(0),map:qt(1),filter:qt(2),some:qt(3),every:qt(4),find:qt(5),findIndex:qt(6),filterOut:qt(7)},Jt=Object.defineProperty,Kt={},Vt=function(t){throw t},Qt=Zt.some,$t=!!(lt=[]["some"])&&m((function(){lt.call(null,ct||function(){throw 1},1)})),te=function(t,e){if(P(Kt,t))return Kt[t];e||(e={});var r=[][t],n=!!P(e,"ACCESSORS")&&e.ACCESSORS,i=P(e,0)?e[0]:Vt,o=P(e,1)?e[1]:void 0;return Kt[t]=!!r&&!m((function(){if(n&&!d)return!0;var t={length:-1};n?Jt(t,1,{enumerable:!0,get:Vt}):t[1]=1,r.call(t,i,o)}))}("some");!function(t,e){var r,n,i,o,s,a=t.target,u=t.global,c=t.stat;if(r=u?h:c?h[a]||H(a,{}):(h[a]||{}).prototype)for(n in e){if(o=e[n],i=t.noTargetGet?(s=Lt(r,n))&&s.value:r[n],!Ct(u?n:a+(c?".":"#")+n,t.forced)&&void 0!==i){if(typeof o==typeof i)continue;Dt(o,i)}(t.sham||i&&i.sham)&&M(o,"sham",!0),pt(r,n,o,t)}}({target:"Array",proto:!0,forced:!$t||!te},{some:function(t){return Qt(this,t,arguments.length>1?arguments[1]:void 0)}});var ee,re,ne=Function.call;ee="some",kt(ne,h["Array"].prototype[ee],re);return new f(new s.EventEmitter,"https://checkout.yahoo.com/widget/v1/switchOffer.widget")}();
